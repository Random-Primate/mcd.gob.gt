= simple_form_for @solicitud, html: { class: 'form-horizontal' } do |f|
  = f.error_notification

  .container
    .progress{style: 'margin-bottom: 3em;'}
      .progress-bar#progress{ role:'progressbar', 'aria-valuenow'=>'20', 'aria-valuemin'=>'0', 'aria-valuemax'=>'100', style: 'width: 20%;'}
        = 'Solicitante'

    #instrucciones_solicitante
      .col-md-3
        .panel.panel-default
          .panel-heading
            %h3.panel-title
              = 'No. 1: Instrucciones'
          .panel-body
            %p
              = 'Por favor ingrese los datos de la persona solicitante en las casillas a la derecha. Cuando lo complete puede presionar el botón Siguiente.'

    #instrucciones_solicitud
      .col-md-4
        .panel.panel-default
          .panel-heading
            %h3.panel-title
              = 'No. 2: Instrucciones'
          .panel-body
            %p
              = 'Ingrese el departamento y municipio donde se entregaran los implementos.'
              = 'Cuando lo complete puede presionar el botón Siguiente.'
        .panel.panel-default
          .panel-heading
            %h3.panel-title
              %a{ 'data-toggle' => 'collapse', 'data-parent' => '#accordion', href: '#collapseOne'}
                = 'Piezas por implemento:'
          #collapseOne.panel-collapse.collapse
            .panel-body
              %ul.list-group
                - @implementos.each do |implemento|
                  %li.list-group-item
                    = implemento.name
                    %span.badge
                      = implemento.piezas
                %li.list-group-item
                  = 'Otros'
                  %span.badge
                    = '1'

    #solicitante
      .col-md-4.col-md-offset-1
        .form-inputs
          = simple_fields_for :solicitante do |solicitante|
            = render 'solicitante_fields', :f => solicitante

    #ubicacion
      .col-md-4
        #place
          .panel.panel-info
            .panel-heading
              %h3.panel-title
                = 'Departamento y Municipio'
            .panel-body
              = f.input :departamento, collection: Departamento.order(:name), value_method: :name, prompt: 'Departamento', label: false
              = f.input :municipio, collection: Departamento.order(:name), value_method: :name, as: :grouped_select, label: false, group_method: :municipios, prompt: 'Municipio'
        #comunidades
          .panel.panel-info
            .panel-heading
              %h3.panel-title
                = 'Comunidades'
            .panel-body
              = 'Listar las comunidades beneficiadas. Agregar campos por cada comunidad distinta.'
              %br
              .input_fields_wrap
                = f.input_field :comunidades, as: :string, multiple: true, value:''
              %hr.faded
              = link_to 'Agregar', '#', class: 'add_field_button btn btn-primary'

    #implento
      .col-md-4
        #disciplina
          .panel.panel-info
            .panel-heading
              %h3.panel-title
                = 'Disciplina Solicitada'
            .panel-body
              = f.input :disciplina, label: false
        #implementos
          .panel.panel-info
            .panel-heading
              %h3.panel-title
                = 'Implementos'
            .panel-body
              = 'Por favor seleccione el panel "Piezas por Implemento" para ver una lista de unidades por implemento.'
              = 'Al agregar un implemento a su solicitud está agregando un grupo según la lista.'
              %br
              %hr.faded
              .input_fields_wrap_second
                = f.simple_fields_for :implementos do |implemento|
                  = render 'implemento_fields', :f => implemento
                .links
                  = link_to_add_association 'Agregar', f, :implementos, class: 'btn btn-primary'

      #beneficiarios
        .col-md-12
          .panel.panel-info
            .panel-heading
              %h3.panel-title
                = 'Beneficiarios Mayores de Edad'
            .panel-body
              = f.simple_fields_for :beneficiarios do |beneficiarios|
                = render 'beneficiario_fields', :f => beneficiarios
              .links
                = link_to_add_association 'Agregar', f, :beneficiarios, class: 'btn btn-primary'

  .well{style: 'min-height: 70px; margin-top: 2em;'}
    = link_to 'Siguiente', '#', id: 'siguiente', class: 'btn btn-primary pull-right'
    = link_to 'Atras', '#', id: 'regresar', class: 'btn btn-primary pull-left'
    = f.button :submit, id: 'sol_submit', value: 'Enviar', class: 'btn btn-warning pull-right'
